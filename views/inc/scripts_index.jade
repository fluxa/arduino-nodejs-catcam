script(type='text/javascript', src='/socket.io/socket.io.js')
script(type='text/javascript')
	
	var socket;
	var socketid;
	var socketConnected = false;

	function onSendButton() {
		sendCommand($('#data').val());
		$('#data').val('');
	}

	function sendCommand(data) {
		if (socketConnected) {
			socket.emit('onSendCommand',data);
			alerts.info('data sent: ' + data);
		};
	}

	function toggleUI(enabled) {

	}

	function socketConnect()
	{
		
		if (!socketConnected) 
		{
			//connect socket
			console.log("socket connect!");

			if(!socket) //create socket
			{
				socket = io.connect();
				socket.on('onConnect', function (data) {

					socketConnected = true;
					socketid = data.socketid;
					toggleUI(true);

					alerts.info('socket connected!');

				});

				socket.on('disconnect', function(data){
					toggleUI(false);
					socketConnected = false;
					socketid = '';
				});
			}
			else //reconnect
			{
				socket.socket.connect();
			}
			
		}

	}

	//onready
	$(function(){

		socketConnect();


	});

